<html>
  <head>
    <title>ym</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="/css/app.css">
  <meta name="generator" content="Hexo 4.2.1"></head>
  <body>
    <div class="head">
      <div class="header">
        <a href="/ ">
          <div class="site-title">YM</div>
        </a>
      </div>
    </div>
    <div class="body">
      <div class="content">
        海外主流社交 APP 分享指南 
<h2 id="了解开放图谱"><a href="#了解开放图谱" class="headerlink" title="了解开放图谱"></a>了解开放图谱</h2><p>一个被分享到社交平台的网页，通常以包含标题、描述和缩略图等摘要的卡片形式显示。网页的内容千差万别，用户想要分享的可能是一篇文章，一首歌，亦或是一部电影。社交平台该如何呈现分享内容才能兼具准确和美观呢？</p>
<a id="more"></a>

<img src="/images/posts/2018/11/open_graph.jpg" class="" width="450" title="开放图谱">

<p>开放图谱（<a href="http://www.ogp.me/" target="_blank" rel="noopener">Open Graph</a>）是 Facebook 公司创造的一种通讯协议，它使任何网页都能成为社交网络中的富对象（具有标题、描述等属性的数据实体）。简单地说，Web 开发者在网页中使用标记语言设置分享内容，网页被用户分享，Facebook 抓取网页上的分享内容，经过加工后显示在页面上。</p>
<p>开放图谱能够带给用户更好的社交体验。举个例子，当用户分享一个视频网站的播放页面 Foo，实际上想要分享的是上面的视频 Bar。在网页标记了视频链接的情况下，Facebook 能够直接显示可播放的视频 Bar，而不需要用户再跳转到网页 Foo 浏览。</p>
<p>目前海外主流的社交软件基本上都支持开放图谱。有了它，我们能够控制网页在社交网络上展示的形式和内容。</p>
<p>在网页的 <code>head</code> 中使用 <code>meta</code> 标签添加开放图谱标记：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Example Page<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">property</span>=<span class="string">"og:url"</span> <span class="attr">content</span>=<span class="string">"https://example.com"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">property</span>=<span class="string">"og:type"</span> <span class="attr">content</span>=<span class="string">"website"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">property</span>=<span class="string">"og:title"</span> <span class="attr">content</span>=<span class="string">"Introducing AI Retouch"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">property</span>=<span class="string">"og:description"</span> <span class="attr">content</span>=<span class="string">"I am using BeautyPlus ..."</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">property</span>=<span class="string">"og:image"</span> <span class="attr">content</span>=<span class="string">"https://example.com/image.jpg"</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>上面的开放图谱标记声明了用户分享的是一个网页，并且提供了标题、描述和图片供社交平台展示。</p>
<p>更多开放图谱骚操作请阅读 Facebook <a href="https://developers.facebook.com/docs/sharing/webmasters/?translation" target="_blank" rel="noopener">网站管理员分享指南</a> 。</p>
<h2 id="分享到-Facebook"><a href="#分享到-Facebook" class="headerlink" title="分享到 Facebook"></a>分享到 Facebook</h2><p>首先，在 Facebook 开发者平台上 <a href="https://developers.facebook.com/apps/" target="_blank" rel="noopener">创建应用</a> 获得 <code>AppId</code> ，在网页中 <a href="https://developers.facebook.com/docs/javascript/quickstart" target="_blank" rel="noopener">加载和初始化 SDK</a> 。</p>
<p>在需要分享内容的时候调起分享对话框：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.FB.ui(&#123;</span><br><span class="line">  method: <span class="string">'share'</span>,</span><br><span class="line">  quote: <span class="string">'some text'</span>,          <span class="comment">// 引文</span></span><br><span class="line">  hashtag: <span class="string">'#frontend'</span>,        <span class="comment">// 话题</span></span><br><span class="line">  href: <span class="string">'https://example.com'</span>  <span class="comment">// 链接</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>随后页面将跳转到 Facebook 的发帖页面。</p>
<h2 id="分享到-Twitter"><a href="#分享到-Twitter" class="headerlink" title="分享到 Twitter"></a>分享到 Twitter</h2><p>Twitter 提供了 <a href="https://developer.twitter.com/en/docs/twitter-for-websites/web-intents/overview" target="_blank" rel="noopener">Web Intents</a> 用于通过网页分享内容，只需使用户跳转到一个链接。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;twitter.com&#x2F;intent&#x2F;tweet?text&#x3D;&#123;推文&#125;&amp;hashtags&#x3D;&#123;话题&#125;&amp;url&#x3D;&#123;网页链接&#125;</span><br></pre></td></tr></table></figure>

<p>可以自定义预设推文 <code>text</code> ，一个或一个以上用逗号分隔的话题 <code>hashtags</code> ，以及网页链接 <code>url</code> 。URL 需要用 <code>encodeURIComponent</code> 编码，否则可能出现跳转到 Twitter 后的链接不完整。</p>
<p>若用户安装了 App，唤醒客户端。否则通过网页版分享。</p>
<h2 id="分享到-Instagram"><a href="#分享到-Instagram" class="headerlink" title="分享到 Instagram"></a>分享到 Instagram</h2><p>很遗憾，目前 Instagram 暂时没有提供任何可靠的 Web 分享方式。</p>
<p>唯一可能有用的是，官方文档中提到的用于调起客户端功能的 <a href="https://www.instagram.com/developer/mobile-sharing/iphone-hooks/" target="_blank" rel="noopener">iPhone Hooks</a> —— 实际上就是深度链接（<a href="https://en.wikipedia.org/wiki/Mobile_deep_linking" target="_blank" rel="noopener">Deep Linking</a>）。对于分享图片的场景，可以先引导用户保存图片，然后用深度链接唤醒 Instagram App，最后由用户手动选择图片发帖。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">instagram:&#x2F;&#x2F;app</span><br></pre></td></tr></table></figure>

<p>注意，经测试这些深度链接在 Android 设备上并不好使，很可能只在 iOS 平台实现。</p>
<h2 id="分享到-WhatsApp"><a href="#分享到-WhatsApp" class="headerlink" title="分享到 WhatsApp"></a>分享到 WhatsApp</h2><p>目前 WhatsApp 仅支持通过深度链接调起 App 的方式分享一段文本。幸运的是，我们可以把网页链接放在 <code>text</code> 中，分享后应用会依据开放图谱友好显示。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whatsapp:&#x2F;&#x2F;send?text&#x3D;&#123;文本&#125;</span><br></pre></td></tr></table></figure>
<h2 id="分享到-Line"><a href="#分享到-Line" class="headerlink" title="分享到 Line"></a>分享到 Line</h2><p>Line 提供了 <a href="https://media.line.me/" target="_blank" rel="noopener">Social Plugins</a> 用于分享网页，只需让用户跳转到一个链接。跳转后会唤醒 App 或者进入网页版 —— 取决于用户是否安装了客户端。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;social-plugins.line.me&#x2F;lineit&#x2F;share?url&#x3D;&#123;网页链接&#125;</span><br></pre></td></tr></table></figure>

<h2 id="分享到-Facebook-Messenger"><a href="#分享到-Facebook-Messenger" class="headerlink" title="分享到 Facebook Messenger"></a>分享到 Facebook Messenger</h2><p>Messenger App 提供了用于分享的深度链接，允许发送一个网页。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fb-messenger:&#x2F;&#x2F;share&#x2F;?link&#x3D;&#123;网页链接&#125;</span><br></pre></td></tr></table></figure>
 
      </div>
    </div>
    <div class="foot">
      <div class="footer">
        <span class="copyright">©️2020 ym</span>
        <a href="http://www.beian.miit.gov.cn" target="_blank">粤ICP备20041235 </a>
      </div>
    </div>
  </body>
</html>