<html>
  <head>
    <title>ym</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="/css/app.css">
  <meta name="generator" content="Hexo 4.2.1"></head>
  <body>
    <div class="head">
      <div class="header">
        <a href="/ ">
          <div class="site-title">YM</div>
        </a>
      </div>
    </div>
    <div class="body">
      <div class="content">
        Textarea 的换行符处理 
<p>用户使用 textarea 控件输入的包含回车换行的内容，后端获取后存储到数据库会变成一整段文本，存在换行符丢失的问题。为了保留换行符，需要在前后端通信的过程中做一些必要的处理。</p>
<a id="more"></a>

<p>使用 JavaScript 把字符串中的所有换行符替换为 <code>&lt;br/&gt;</code> ，再存到MySQL数据库中，以后前端显示时就可以直接打印这个字符串。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">string = string.replace(<span class="regexp">/\n/g</span>,<span class="string">"&lt;br/&gt;"</span>);</span><br></pre></td></tr></table></figure>

<p>如果用户要通过 textarea 再次编辑该字符串，使用 PHP 把所有的 <code>&lt;br/&gt;</code> 替换为换行符后再显示给用户。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$string = str_replace(<span class="string">"&lt;br/&gt;"</span>,<span class="string">"\n"</span>,$string);</span><br></pre></td></tr></table></figure> 
      </div>
    </div>
    <div class="foot">
      <div class="footer">
        <span class="copyright">©️2020 ym</span>
        <a href="http://www.beian.miit.gov.cn" target="_blank">粤ICP备20041235 </a>
      </div>
    </div>
  </body>
</html>