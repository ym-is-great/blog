<html>
  <head>
    <title>ym</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="/css/app.css">
  <meta name="generator" content="Hexo 4.2.1"></head>
  <body>
    <div class="head">
      <div class="header">
        <a href="/ ">
          <div class="site-title">YM</div>
        </a>
      </div>
    </div>
    <div class="body">
      <div class="content">
        Homestead 开发环境配置 
<p>Laravel Homestead 是一套完整的 PHP 开发环境，类似 WampServer 。不同的是，Homestead 运行于虚拟机之中，而 WampServer 则直接将服务端软件安装在本机上。</p>
<a id="more"></a>

<p>Homestead 的安装依赖于虚拟机软件和 Vagrant 。Vagrant 是一个快速搭建开发环境的工具，类似装系统用的 Ghost ，可以直接把别人打包好的开发环境（包括系统和服务端软件），Copy/Paste 到一台设备中，省去逐一安装服务端软件的麻烦。</p>
<p>接下来的实践完全基于官方文档，并且已成功在 Win7 64bit 下安装了 Homestead 。</p>
<h3 id="安装虚拟机软件"><a href="#安装虚拟机软件" class="headerlink" title="安装虚拟机软件"></a>安装虚拟机软件</h3><p>虚拟机软件可选择 VirtualBox 或 VMware ，虽然官方推荐使用效率更高的 VMware ，但为了节约时间我安装了开源且免费的 <a href="https://www.virtualbox.org/" target="_blank" rel="noopener">VirtualBox</a> ，版本5.1.8。</p>
<h3 id="安装-Vagrant"><a href="#安装-Vagrant" class="headerlink" title="安装 Vagrant"></a>安装 Vagrant</h3><p>访问<a href="https://www.vagrantup.com/" target="_blank" rel="noopener">官网</a>下载并安装 Vagrant 。</p>
<h3 id="添加-Vagrant-Box"><a href="#添加-Vagrant-Box" class="headerlink" title="添加 Vagrant Box"></a>添加 Vagrant Box</h3><p>Vagrant Box 是使用 Vagrant 将一整套开发环境打包成的 .box 镜像文件。在命令行工具中执行以下命令即可添加 Homestead 镜像，等待下载/安装完毕。如果下载失败，可参考<a href="http://www.caiyiming.com/article/20161024.html" target="_blank" rel="noopener">解决方案</a>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vagrant box add laravel&#x2F;homestead</span><br></pre></td></tr></table></figure>


<h3 id="安装-Homestead"><a href="#安装-Homestead" class="headerlink" title="安装 Homestead"></a>安装 Homestead</h3><p>使用 Git 命令拷贝 Homestead 的代码并保存到 Home 目录的 Homestead 文件夹下。命令行中的 ~ 目录即为 Home 目录，如果你不知道 Home 目录的路径，尝试在“计算机”的地址栏输入 <code>%homepath%</code> 访问。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~</span><br><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;laravel&#x2F;homestead.git Homestead</span><br></pre></td></tr></table></figure>

<p>定位到 Homestead 文件夹，创建 Homestead 配置文件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~&#x2F;Homestead</span><br><span class="line">bash init.sh</span><br></pre></td></tr></table></figure>

<h3 id="配置-Homestead"><a href="#配置-Homestead" class="headerlink" title="配置 Homestead"></a>配置 Homestead</h3><p>用编辑器打开 Home 目录下的隐藏文件夹 .homestead 中的 Homestead.yaml 文件，该文件为 Homestead 的配置文件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"># 服务器的局域网 IP 地址</span><br><span class="line">ip: &quot;192.168.10.10&quot;</span><br><span class="line"></span><br><span class="line"># 服务器可用内存</span><br><span class="line">memory: 2048</span><br><span class="line"></span><br><span class="line"># 服务器可用 CPU 核心数</span><br><span class="line">cpus: 1</span><br><span class="line"></span><br><span class="line"># 虚拟机软件</span><br><span class="line">provider: virtualbox</span><br><span class="line"></span><br><span class="line"># SSH 公钥</span><br><span class="line">authorize: ~&#x2F;.ssh&#x2F;id_rsa.pub</span><br><span class="line"></span><br><span class="line"># SSH 私钥</span><br><span class="line">keys:</span><br><span class="line">  - ~&#x2F;.ssh&#x2F;id_rsa</span><br><span class="line"></span><br><span class="line"># 本机与虚拟机的路径关联</span><br><span class="line">folders:</span><br><span class="line">  - map: ~&#x2F;Code</span><br><span class="line">    to: &#x2F;home&#x2F;vagrant&#x2F;Code</span><br><span class="line"></span><br><span class="line"># 域名绑定</span><br><span class="line">sites:</span><br><span class="line">    - map: 192.168.10.10</span><br><span class="line">      to: &#x2F;home&#x2F;vagrant&#x2F;Code</span><br><span class="line"></span><br><span class="line"># 默认数据库名称</span><br><span class="line">databases:</span><br><span class="line">    - homestead</span><br></pre></td></tr></table></figure>

<p><em>provider</em> 应该根据本机已安装的虚拟机软件，设为 <code>virtualbox</code> 、 <code>vmware_fusion</code> 或 <code>vmware_workstation</code> 。<em>authorize/keys</em> 必须与 ~/.ssh 下的对应的密钥文件名称一致。<em>folders</em> 用于关联本机与虚拟机目录，即本机 ~/Code 路径下的文件，相当于也存在于虚拟机的代码根目录 /home/vagrant/Code 路径下，map 路径必须存在。<em>sites</em> 关联域名与虚拟机目录，可设置多站点，此处直接关联了 IP 访问根目录。</p>
<p>运行虚拟机</p>
<p>在 ~\Homestead 目录下，执行该命令。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vagrant up</span><br></pre></td></tr></table></figure>


<p>测试开发环境</p>
<p>写一个 PHP 文件放到 ~\Code 路径下。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">'Hello World!'</span>;</span><br></pre></td></tr></table></figure>

<p>打开浏览器，访问192.168.10.10，看看浏览器是否打印出了 <em>Hello World!</em> 。</p>
<p>相关环境：Windows 7 x64 / VirtualBox 5.1.8 / Laravel Homestead / Laravel 5.2</p>
 
      </div>
    </div>
    <div class="foot">
      <div class="footer">
        <span class="copyright">©️2020 ym</span>
        <a href="http://www.beian.miit.gov.cn" target="_blank">粤ICP备20041235 </a>
      </div>
    </div>
  </body>
</html>